# nvidia-xconfig: X configuration file generated by nvidia-xconfig
# Ansible desktop role template
Section "DRI"
    Mode 0666
EndSection

Section "ServerLayout"

    #InputDevice    "Keyboard0" "CoreKeyboard"
    #InputDevice    "Mouse0" "CorePointer"
    Identifier      "Layout0"
    {% for screen in desktop_xonfig_screens %}
    {% if item.screens.index(screen) == 0 %}
    Screen 0        "Screen{{item.screens.index(screen)}}"
    {% else %}
    Screen {{item.screens.index(screen)}}        "Screen{{item.screens.index(screen)}}" RightOf "Screen{{item.screens.index(screen)-1}}"
    {% endif %}
    {% endfor %}
    #InputDevice    "Keyboard0" "CoreKeyboard"
    #InputDevice    "Mouse0" "CorePointer"
EndSection

Section "Files"
    FontPath        "/usr/share/fonts/default/Type1"
EndSection

Section "InputDevice"

    # generated from default
    Identifier     "Mouse0"
    Driver         "mouse"
    Option         "Protocol" "auto"
    Option         "Device" "/dev/input/mice"
    Option         "Emulate3Buttons" "no"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"

    # generated from default
    Identifier     "Keyboard0"
    Driver         "kbd"
EndSection
{% for monitor in item.monitors %}
Section "Monitor"
    Identifier     "{{monitor}}"
    VendorName     "Unknown"
    ModelName      "Unknown"
    HorizSync       28.0 - 33.0
    VertRefresh     43.0 - 72.0
    Option         "DPMS"
EndSection
{% endfor %}
{% for device in item.devices %}
Section "Device"
    Identifier     "Device{{item.devices.index(device)}}"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    boardname      "{{item.boardname}}"
    BusID          "{{device}}"
EndSection
{% endfor %}
{% for screen in item.screens %}
Section "Screen"
    Identifier     "Screen{{item.screens.index(screen)}}"
    Device         "Device{{item.screens.index(screen)}}"
    Monitor        "Monitor{{item.screens.index(screen)}}"
    DefaultDepth    24
    Option         "ProbeAllGpus" "false"
{% if item.boardname == 'GRID K1' %}
    Option         "UseDisplayDevice" "None"
{% endif %}
    SubSection     "Display"
        Virtual     1920 1200
        Depth       24
    EndSubSection
EndSection
{% endfor -%}
